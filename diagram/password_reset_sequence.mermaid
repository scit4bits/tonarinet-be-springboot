sequenceDiagram
    actor User
    participant Frontend as Frontend (React)
    participant Backend as Backend (Spring Boot)
    participant EmailService as Email Delivery

    User->>+Frontend: Enters email on Find Password page and submits
    Frontend->>+Backend: GET /api/auth/forgot-password?email=...
    
    Note over Backend: Generates short-lived JWT (resetToken) for the user
    Note over Backend: Constructs reset URL with the token
    Note over Backend: Set reset JWT for User in DB

    Backend->>+EmailService: Send Email(to=user_email, body=reset_url)
    EmailService-->>-User: Delivers password reset email
    Backend-->>-Frontend: HTTP 200 OK (Email sent)

    User->>User: Clicks reset link in email
    User->>+Frontend: Navigates to Reset Password page with token in URL
    
    Note over Frontend: Page loads, extracts token from URL
    Frontend->>+Backend: GET /api/auth/validate-reset-token?token=...
    Note over Backend: Validates JWT signature and expiration
    
    alt if JWT is not matched with DB Data or expired
    Backend-->>Frontend: Returns false
    Frontend-->>-User: Display error screen 
    end

    Backend-->>-Frontend: Returns true

    Note over Frontend: Shows the new password form
    User->>Frontend: Enters and submits new password

    Frontend->>+Backend: POST /api/auth/reset-password (body: {token, newPassword})
    Note over Backend: Re-validates token, hashes new password, updates user in DB
    Backend-->>-Frontend: Returns { message: "Password has been reset" }

    Note over Frontend: Shows success message
    Frontend->>-User: Redirects to Sign In page after a delay
